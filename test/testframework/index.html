<!doctype html><html lang=ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="–¢–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫"><meta property="og:title" content="–¢–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫"><meta property="og:description" content="–¢–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ PageObject PageObject - Martin Fowler
Interaction Context TODO: move to advanced section
–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ PO. –ò—Å–ø–æ–ª—å–∑—É–µ–º —á—Ç–æ–±—ã –æ—Ç—Ä–∞–∑–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é View, —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏.
ViewElement PageObject –Ω–∞–¥ View. –°–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ:
 InteractionContext - –∑–Ω–∞–Ω–∏—è –ø—Ä–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç, –æ–∫—Ä—É–∂–µ–Ω–∏–µ Actions - –¥–µ–π—Å—Ç–≤–∏—è —Å —ç–ª–µ–º–µ–Ω—Ç–æ–º Checks - –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è  –°–æ–∑–¥–∞–Ω–∏–µ –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∞–±—Ä–∏—á–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é element:
val submitButton: ViewElement = element(withId(R.id.submit_button)) ViewMatcher –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π PageObject, —É–Ω–∞—Å–ª–µ–¥—É–µ—Ç –µ–≥–æ matcher.
–í–ª–æ–∂–µ–Ω–Ω—ã–µ ViewElement –í—Å–µ PageObject –º–æ–≥—É—Ç –±—ã—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏, –æ—Ç—Ä–∞–∂–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é:"><meta property="og:type" content="article"><meta property="og:url" content="https://avito-tech.github.io/avito-android/test/testframework/"><title>–¢–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ | Avito Android</title><link rel=icon href=/avito-android/favicon.png type=image/x-icon><link rel=stylesheet href=/avito-android/book.min.eddc90f1d1267cb826e7cffc53c434e50061c4bfe41146a43670842ce6cb3bf6.css integrity="sha256-7dyQ8dEmfLgm58/8U8Q05QBhxL/kEUakNnCELObLO/Y="><script defer src=/avito-android/ru.search.min.786c524adb79fbb0fafd0bbf40cadb890dae138bcd764597942177a21a2cc327.js integrity="sha256-eGxSStt5+7D6/Qu/QMrbiQ2uE4vNdkWXlCF3ohoswyc="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://avito-tech.github.io/avito-android><span>Avito Android</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=–ü–æ–∏—Å–∫ aria-label=–ü–æ–∏—Å–∫ maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><p><a href=https://avito-tech.github.io/avito-android/>–í–≤–µ–¥–µ–Ω–∏–µ</a></p></li><li><p><a href=https://avito-tech.github.io/avito-android/values/>–¶–µ–Ω–Ω–æ—Å—Ç–∏</a></p></li><li><p><a href=https://avito-tech.github.io/avito-android/tech_radar/techradar/>–¢–µ—Ö —Ä–∞–¥–∞—Ä</a></p></li><li><p>Contributing</p><ul><li><a href=https://avito-tech.github.io/avito-android/contributing/howtostart/>How to start</a></li><li><a href=https://avito-tech.github.io/avito-android/contributing/docs/>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a></li><li><a href=https://avito-tech.github.io/avito-android/contributing/codereview/>Code Review</a></li><li><a href=https://avito-tech.github.io/avito-android/contributing/codestyle/>Code Style</a></li><li><a href=https://avito-tech.github.io/avito-android/contributing/featuretoggles/>Feature Toggles</a></li><li><a href=https://avito-tech.github.io/avito-android/contributing/knownissues/>Known Issues</a></li></ul></li><li><p>IDE</p><ul><li><a href=https://avito-tech.github.io/avito-android/ide/configurations/>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</a></li><li><a href=https://avito-tech.github.io/avito-android/ide/templates/>–®–∞–±–ª–æ–Ω—ã</a></li><li><a href=https://avito-tech.github.io/avito-android/ide/speedup/>–£—Å–∫–æ—Ä–µ–Ω–∏–µ</a></li><li><a href=https://avito-tech.github.io/avito-android/ide/benchmarking/>–ë–µ–Ω—á–º–∞—Ä–∫–∏</a></li></ul></li><li><p>–°–±–æ—Ä–∫–∞</p><ul><li><a href=https://avito-tech.github.io/avito-android/ide/configurations/>–ó–∞–ø—É—Å–∫</a></li><li><a href=https://avito-tech.github.io/avito-android/assemble/buildtypes/>–¢–∏–ø—ã —Å–±–æ—Ä–∫–∏</a></li><li><a href=https://avito-tech.github.io/avito-android/assemble/dependencies/>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</a></li><li><a href=https://avito-tech.github.io/avito-android/assemble/minimization/>–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è</a></li><li><a href=https://avito-tech.github.io/avito-android/assemble/benchmarks/>–ë–µ–Ω—á–º–∞—Ä–∫–∏</a></li><li><a href=https://avito-tech.github.io/avito-android/assemble/profiling/>–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li><li><a href=https://avito-tech.github.io/avito-android/assemble/buildmetrics/>–ú–µ—Ç—Ä–∏–∫–∏</a></li><li><a href=https://avito-tech.github.io/avito-android/assemble/mirakle/>Mirakle</a></li><li><a href=https://avito-tech.github.io/avito-android/assemble/troubleshooting/>Troubleshooting</a></li></ul></li><li><p>Architecture</p><ul><li><a href=https://avito-tech.github.io/avito-android/architecture/dagger/>Dagger</a></li><li><a href=https://avito-tech.github.io/avito-android/architecture/modules/>–ú–æ–¥—É–ª–∏</a></li></ul></li><li><p>API</p></li><li><p><a href=https://avito-tech.github.io/avito-android/analytics/analytics/>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></p><ul><li><a href=https://avito-tech.github.io/avito-android/analytics/statsd/>Statsd</a></li></ul></li><li><p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</p><ul><li><a href=https://avito-tech.github.io/avito-android/test/testframework/>Test framework</a></li><li><a href=https://avito-tech.github.io/avito-android/test/manual/>–†—É—á–Ω–æ–µ</a></li><li><a href=https://avito-tech.github.io/avito-android/test/testmanagementsystem/>Test Management System</a></li><li><a href=https://avito-tech.github.io/avito-android/test/run/>–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤</a></li><li><a href=https://avito-tech.github.io/avito-android/test/unittesting/>–Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã</a></li><li><a href=https://avito-tech.github.io/avito-android/test/screenshottesting/>–°–∫—Ä–∏–Ω—à–æ—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã</a></li><li><a href=https://avito-tech.github.io/avito-android/test/troubleshootingui/>Troubleshooting</a></li><li><a href=https://avito-tech.github.io/avito-android/test/dynamicconfig/>–ö–∞—Å—Ç–æ–º–Ω—ã–π –∑–∞–ø—É—Å–∫</a></li><li><a href=https://avito-tech.github.io/avito-android/test/support/>–ü–æ–º–æ—â—å</a></li></ul></li><li><p><a href=http://links.k.avito.ru/ff>Design System</a></p></li><li><p>Performance</p><ul><li><a href=https://avito-tech.github.io/avito-android/performance/analytics/>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></li></ul></li><li><p>–ü—Ä–æ–≤–µ—Ä–∫–∏</p><ul><li><a href=https://avito-tech.github.io/avito-android/checks/androidlint/>Android lint</a></li></ul></li><li><p>CI</p><ul><li><a href=https://avito-tech.github.io/avito-android/ci/civalues/>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è</a></li><li><a href=https://avito-tech.github.io/avito-android/ci/cigradleplugin/>CI Gradle Plugin</a></li><li><a href=https://avito-tech.github.io/avito-android/ci/customgradleplugins/>Custom Gradle Plugins</a></li><li><a href=https://avito-tech.github.io/avito-android/ci/impactanalysis/>Impact analysis</a></li><li><a href=https://avito-tech.github.io/avito-android/ci/containers/>Containers</a></li></ul></li><li><p>CD</p><ul><li><a href=https://avito-tech.github.io/avito-android/cd/release/>–†–µ–ª–∏–∑</a></li><li><a href=https://avito-tech.github.io/avito-android/cd/artifacts/>–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏</a></li><li><a href=https://avito-tech.github.io/avito-android/cd/qapps/>QApps</a></li></ul></li><li><p><a href=https://avito-tech.github.io/avito-android/infrastructure/>Infrastructure (Github project)</a></p></li><li><p><a href=https://avito-tech.github.io/avito-android/architectureguidelines/>–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</a></p></li><li><p><a href=https://avito-tech.github.io/avito-android/externallibrarychangeprocess/>–í–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏</a></p></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/avito-android/svg/menu.svg alt=Menu></label>
<strong>–¢–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫</strong></header><article class=markdown><h1 id=—Ç–µ—Å—Ç–æ–≤—ã–π-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫>–¢–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫</h1><h2 id=pageobject>PageObject</h2><p><a href=https://martinfowler.com/bliki/PageObject.html>PageObject - Martin Fowler</a></p><h2 id=interaction-context>Interaction Context</h2><p>TODO: move to advanced section</p><p>–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ PO.
–ò—Å–ø–æ–ª—å–∑—É–µ–º —á—Ç–æ–±—ã –æ—Ç—Ä–∞–∑–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é View, —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏.</p><h2 id=viewelement>ViewElement</h2><p>PageObject –Ω–∞–¥ View. –°–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ:</p><ul><li>InteractionContext - –∑–Ω–∞–Ω–∏—è –ø—Ä–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç, –æ–∫—Ä—É–∂–µ–Ω–∏–µ</li><li>Actions - –¥–µ–π—Å—Ç–≤–∏—è —Å —ç–ª–µ–º–µ–Ω—Ç–æ–º</li><li>Checks - –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è</li></ul><h3 id=—Å–æ–∑–¥–∞–Ω–∏–µ>–°–æ–∑–¥–∞–Ω–∏–µ</h3><p>–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∞–±—Ä–∏—á–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é <code>element</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>val</span> submitButton: ViewElement = element(withId(R.id.submit_button))
</code></pre></div><p>ViewMatcher –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π PageObject, —É–Ω–∞—Å–ª–µ–¥—É–µ—Ç –µ–≥–æ matcher.</p><h3 id=–≤–ª–æ–∂–µ–Ω–Ω—ã–µ-viewelement>–í–ª–æ–∂–µ–Ω–Ω—ã–µ ViewElement</h3><p>–í—Å–µ PageObject –º–æ–≥—É—Ç –±—ã—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏, –æ—Ç—Ä–∞–∂–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#75715e>// parent -&gt; container -&gt; button
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>val</span> container: ViewElement = element(withId(R.id.container))

<span style=color:#66d9ef>val</span> button: ViewElement = container.element(withId(R.id.button))
</code></pre></div><h3 id=–∫–∞—Å—Ç–æ–º–Ω—ã–π-viewelement>–ö–∞—Å—Ç–æ–º–Ω—ã–π ViewElement</h3><h4 id=–¥–ª—è-–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è>–î–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h4><p>–ë—ã–≤–∞–µ—Ç —É–¥–æ–±–Ω–æ –æ—Ç—Ä–∞–∑–∏—Ç—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º –∫–ª–∞—Å—Å–æ–º, —á—Ç–æ–±—ã –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö —ç–∫—Ä–∞–Ω–∞—Ö.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#75715e>// parent --&gt; selector --&gt; hint
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>val</span> selector: ImageSelectorElement = element(withId(R.id.selector))

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ImageSelectorElement</span>(interactionContext: InteractionContext) : ViewElement(interactionContext) {
    <span style=color:#66d9ef>val</span> hint: ViewElement = element(withId(R.id.hint))
}
</code></pre></div><h4 id=–¥–ª—è-–∫–∞—Å—Ç–æ–º–Ω—ã—Ö-actions-checks>–î–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö actions, checks</h4><p>–ï—â–µ –æ–¥–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ ViewElement - –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ actions, checks.
–ü—Ä–∏–º–µ—Ä—ã: <code>RatingBarElement</code>, <code>BottomSheetElement</code>.</p><h4 id=–¥–ª—è-–¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ-matcher>–î–ª—è –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ Matcher</h4><p>–î–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —É–¥–æ–±–Ω–æ –¥–µ—Ä–∂–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ –∑–Ω–∞–Ω–∏—è –ø—Ä–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –º–∞—Ç—á–µ—Ä.<br>–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –±—É–¥–µ–º —Ç–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω—è—Ç—å –µ–≥–æ, –Ω–æ –Ω–µ –∑–∞–º–µ–Ω—è—Ç—å.<br>–ü–æ–∫–∞ —á—Ç–æ –Ω–µ —É–º–µ–µ–º –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π interaction context,
–ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ElementWithEmbeddedMatcher</span> : HandleParentContext, ViewElement {

    <span style=color:#66d9ef>constructor</span>(interactionContext: InteractionContext)
        : <span style=color:#66d9ef>super</span>(interactionContext.provideChildContext(defaultMatcher()))

    <span style=color:#66d9ef>constructor</span>(interactionContext: InteractionContext, matcher: Matcher&lt;View&gt;)
        : <span style=color:#66d9ef>super</span>(interactionContext.provideChildContext(Matchers.allOf(
        defaultMatcher(), matcher
    )))

}
</code></pre></div><p><code>HandleParentContext</code> - –º–∞—Ä–∫–µ—Ä–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
–ò–∑–º–µ–Ω—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ <code>PageObject.element(matcher)</code>.
–ú—ã —Å–∞–º–∏ —Å–æ–∑–¥–∞–µ–º –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–æ–ª—å–∫–æ –º—ã –∑–Ω–∞–µ–º –ø—Ä–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –º–∞—Ç—á–µ—Ä.</p><h2 id=screen>Screen</h2><p>–≠—Ç–æ PageObject –¥–ª—è —ç–∫—Ä–∞–Ω–∞ (activity, fragment, dialog, &mldr;)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PublicProfileScreen</span> : PageObject(), Screen {
    ...
}
</code></pre></div><h3 id=rootid>rootId</h3><p>–Ø–≤–Ω–æ —Å–≤—è–∑—ã–≤–∞–µ–º PageObject —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º layout:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>override</span> <span style=color:#66d9ef>val</span> rootId: Int = com.avito.android.public_profile_stuff.R.id.public_profile_screen_root
</code></pre></div><ul><li>–ü–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –Ω–∞–π—Ç–∏ –∫–∞–∫–æ–π PageObject –¥–ª—è —ç—Ç–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –∏ –≤ –æ–±—Ä–∞—Ç–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É</li><li>–í—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ PageObject –Ω–µ—è–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —ç—Ç–æ—Ç layout</li><li>–°–≤—è–∑—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω —Å gradle-–º–æ–¥—É–ª–µ–º. –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏–º–ø–∞–∫—Ç-–∞–Ω–∞–ª–∏–∑–∞</li></ul><h3 id=—ç–ª–µ–º–µ–Ω—Ç—ã>–≠–ª–µ–º–µ–Ω—Ç—ã</h3><p>PageObject —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>val</span> submitButton: ViewElement = element(withId(R.id.submit_button))
</code></pre></div><p>–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ <code>element</code>, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç.
–ü—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∫–æ–π —ç–∫—Ä–∞–Ω —Å–µ–π—á–∞—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</p><h3 id=screenchecks>ScreenChecks</h3><p>–ö–∞–∂–¥—ã–π —ç–∫—Ä–∞–Ω —É–º–µ–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –æ—Ç–∫—Ä—ã—Ç –æ–Ω —Å–µ–π—á–∞—Å –∏–ª–∏ –Ω–µ—Ç.<br>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin>assertion(<span style=color:#e6db74>&#34;&#34;&#34;–ü–µ—Ä–µ—à–ª–∏ –Ω–∞ —ç–∫—Ä–∞–Ω ...&#34;&#34;&#34;</span>) {
    Screen.vasPublish.checks.isOpened()
}
</code></pre></div><p>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –æ—á–µ–≤–∏–¥–Ω—ã:</p><ul><li>–î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä—É—á–Ω—É—é, –∑–∞—á–∞—Å—Ç—É—é —É–∂–µ –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Å—Ç–æ–ª–∫–Ω–µ–º—Å—è —Å –æ—à–∏–±–∫–æ–π</li><li>–ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–¥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å</li><li>–≠—Ç–æ —à—É–º. –ï—Å–ª–∏ —è –æ–±—Ä–∞—â–∞—é—Å—å –∫ —ç–ª–µ–º–µ–Ω—Ç—É —ç–∫—Ä–∞–Ω–∞, —Ç–æ –æ–∂–∏–¥–∞—é —á—Ç–æ —ç–∫—Ä–∞–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–µ–π—á–∞—Å –≤–∏–¥–µ–Ω.</li></ul><p>–ú—ã —É–º–µ–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∫–æ–π —ç–∫—Ä–∞–Ω –æ—Ç–∫—Ä—ã—Ç –ø–µ—Ä–µ–¥ –ª—é–±—ã–º –¥–µ–π—Å—Ç–≤–∏–µ–º –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π.<br>–î–ª—è —ç—Ç–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —ç–∫—Ä–∞–Ω:</p><ul><li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —ç–∫—Ä–∞–Ω –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç <code>PageObject</code></li><li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —ç–∫—Ä–∞–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>override</span> <span style=color:#66d9ef>val</span> checks: ScreenChecks = StrictScreenChecks(<span style=color:#66d9ef>this</span>)
</code></pre></div><p>–í–∫–ª—é—á–∏–º —ç—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ <a href=http://links.k.avito.ru/MBS7204>MBS-7204</a></p><ul><li>–°–æ–∑–¥–∞–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –ø–æ–º–æ—â—å—é —Ñ–∞–±—Ä–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ <code>element</code>:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>val</span> submitButton: ViewElement = element(withId(R.id.submit_button)) <span style=color:#75715e>// üëç
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> submitButton = ViewElement(withId(R.id.submit_button))          <span style=color:#75715e>// üëé Legacy
</span></code></pre></div><p>–¢–∞–∫ –º—ã —Å–≤—è–∑—ã–≤–∞–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å —ç–∫—Ä–∞–Ω–æ–º –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–æ —É–∂–µ –≤–æ –≤—Å–µ—Ö –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è—Ö:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin>submitButton.checks.displayedWithText(<span style=color:#e6db74>&#34;–û—Ç–ø—Ä–∞–≤–∏—Ç—å&#34;</span>) <span style=color:#75715e>// &lt;-- –∑–¥–µ—Å—å –Ω–µ—è–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏–º —á—Ç–æ —Ç–µ–∫—É—â–∏–π —ç–∫—Ä–∞–Ω –æ—Ç–∫—Ä—ã—Ç
</span></code></pre></div><h3 id=–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è-—ç–∫—Ä–∞–Ω–∞>–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞</h3><p>–ß–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç —á—Ç–æ –æ–¥–∏–Ω –∏ —Ç–æ—Ç-–∂–µ —ç–∫—Ä–∞–Ω —É–º–µ–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑ API.<br>–£–¥–æ–±–Ω–æ –∑–Ω–∞—Ç—å –ø—Ä–æ —ç—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —É—á–∏—Ç—ã–≤–∞—Ç—å –≤ –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>Screen</span>.publishParamsWithTitle(title: String) = PublishParamsScreen(title)

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PublishParamsScreen</span>(<span style=color:#66d9ef>val</span> title: String? = <span style=color:#66d9ef>null</span>) : PageObject(), Screen {
    
    ...
    <span style=color:#66d9ef>if</span> (title != <span style=color:#66d9ef>null</span>) {
        title.checks.withText(title)
    }
    ...
}
</code></pre></div><h2 id=how-to-test>How to test</h2><h3 id=network>Network</h3><p>TBD</p><h3 id=analytics>Analytics</h3><p>–ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–æ–±—ã—Ç–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ (Analytics) —Å –Ω—É–∂–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.<br>–ù–µ –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin>@get:Rule
<span style=color:#66d9ef>val</span> analytics = AnalyticsRule()

 @Test
<span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>screen_shown___ShowSearchMapEvent_should_be_sent</span>() {
    screenRule.start()

    Screen.mapScreen.checks.isOpened()

    analytics.checks.assertEventTracked&lt;ShowSearchMapEvent&gt;()
}
</code></pre></div></article><div class="book-footer justify-between"><div><a class="flex align-center" href=https://github.com/avito-tech/avito-android/tree/develop/docs/content/test/TestFramework.md target=_blank><img src=/avito-android/svg/edit.svg alt=Edit>
<span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —Å—Ä–∞–Ω–∏—Ü—É</span></a></div></div></div><aside class="book-toc levels-6 fixed"><nav id=TableOfContents><ul><li><a href=#pageobject>PageObject</a></li><li><a href=#interaction-context>Interaction Context</a></li><li><a href=#viewelement>ViewElement</a><ul><li><a href=#—Å–æ–∑–¥–∞–Ω–∏–µ>–°–æ–∑–¥–∞–Ω–∏–µ</a></li><li><a href=#–≤–ª–æ–∂–µ–Ω–Ω—ã–µ-viewelement>–í–ª–æ–∂–µ–Ω–Ω—ã–µ ViewElement</a></li><li><a href=#–∫–∞—Å—Ç–æ–º–Ω—ã–π-viewelement>–ö–∞—Å—Ç–æ–º–Ω—ã–π ViewElement</a><ul><li><a href=#–¥–ª—è-–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è>–î–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a></li><li><a href=#–¥–ª—è-–∫–∞—Å—Ç–æ–º–Ω—ã—Ö-actions-checks>–î–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö actions, checks</a></li><li><a href=#–¥–ª—è-–¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ-matcher>–î–ª—è –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ Matcher</a></li></ul></li></ul></li><li><a href=#screen>Screen</a><ul><li><a href=#rootid>rootId</a></li><li><a href=#—ç–ª–µ–º–µ–Ω—Ç—ã>–≠–ª–µ–º–µ–Ω—Ç—ã</a></li><li><a href=#screenchecks>ScreenChecks</a></li><li><a href=#–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è-—ç–∫—Ä–∞–Ω–∞>–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞</a></li></ul></li><li><a href=#how-to-test>How to test</a><ul><li><a href=#network>Network</a></li><li><a href=#analytics>Analytics</a></li></ul></li></ul></nav></aside></main></body></html>